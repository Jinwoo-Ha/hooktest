#!/bin/sh

echo "ğŸ” Push ì „ íŒŒì¼ ê²€ì‚¬ë¥¼ ì‹œì‘í•©ë‹ˆë‹¤..."

# ì›ê²© ë¸Œëœì¹˜ì™€ ë¹„êµí•˜ì—¬ ì‚­ì œëœ íŒŒì¼ í™•ì¸
deleted_files=$(git diff origin/main...HEAD --diff-filter=D --name-only)

if [ ! -z "$deleted_files" ]; then
    echo "âš ï¸ ê²½ê³ : ë‹¤ìŒ íŒŒì¼ë“¤ì´ ì‚­ì œë  ì˜ˆì •ì…ë‹ˆë‹¤:"
    echo "$deleted_files"
    echo ""
    echo "ì •ë§ë¡œ ì´ íŒŒì¼ë“¤ì„ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?"
    
    read -p "ê³„ì†í•˜ë ¤ë©´ 'yes'ë¥¼ ì…ë ¥í•˜ì„¸ìš”: " response
    if [ "$response" != "yes" ]; then
        echo "âŒ Pushê°€ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤."
        exit 1
    fi
fi

echo "âœ… íŒŒì¼ ê²€ì‚¬ê°€ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤."
exit 0