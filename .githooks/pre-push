#!/bin/sh

echo "ğŸ” Push ì „ íŒŒì¼ ê²€ì‚¬ë¥¼ ì‹œì‘í•©ë‹ˆë‹¤..."

# ì‚­ì œëœ íŒŒì¼ í™•ì¸
deleted_files=$(git diff origin/main...HEAD --diff-filter=D --name-only)

# ì‚­ì œëœ íŒŒì¼ì´ ìˆëŠ” ê²½ìš°
if [ ! -z "$deleted_files" ]; then
    echo ""
    echo "âš ï¸ ê²½ê³ : ë‹¤ìŒ íŒŒì¼ë“¤ì´ ì‚­ì œë  ì˜ˆì •ì…ë‹ˆë‹¤:"
    echo "$deleted_files"
    echo ""
    echo "ì‚­ì œë¥¼ ì§„í–‰í•˜ë ¤ë©´ 'yes'ë¥¼ ì…ë ¥í•˜ê³  Enterë¥¼ ëˆ„ë¥´ì„¸ìš”."
    
    # Windowsì™€ VSCodeì—ì„œ ë” ì•ˆì •ì ìœ¼ë¡œ ì‘ë™í•˜ëŠ” ë°©ì‹
    printf "ì…ë ¥: "
    read -r answer </dev/tty
    
    if [ "$answer" != "yes" ]; then
        echo ""
        echo "âŒ Pushê°€ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤."
        exit 1
    fi
    
    echo ""
    echo "âœ… ì‚­ì œë¥¼ ì§„í–‰í•©ë‹ˆë‹¤."
fi

echo "âœ… Pushë¥¼ ì§„í–‰í•©ë‹ˆë‹¤."
exit 0
